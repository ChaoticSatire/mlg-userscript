// ==UserScript==
// @name       ( ͡° ͜ʖ ͡°) Hitmarkers Edition
// @namespace  http://reddit.com/u/twerkclan
// @version    0.1
// @description  MLG xXxUserScriptxXx
// @match      http://*/*
// @match      https://*/*
// @copyright  2012+, You
// ==/UserScript==

var hitmarker_png = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAJqSURBVHja7JpNattAFIC/MUJyb9B00coQnyDQxRgU8AViX8JZ6ySGLBKcS0i5QKGGaGHwCRSI20XTK8Sb10UsM5HtRD8umoAeaDOyn75PM2hGT6Nc10t5iT6AUoqzs+8Ujfv7nzQRntdNATpGW2ocMyyLweB81u1+Sj2vm2bwAM7mzqfr9fNp1pgk81OtA4BLW+CTZD4x21zXe1ivn/tmDxBFMVEU4/s9Nn+Y2QLv+70tnxkdpRRKqW3DaHTBdDq1QsKEn06njEYX23NbZq0DtA5mgPh+T6IoFhGRKIrF93sCiNbBbPO7nUNE/stRhMkUqCzRKHxOoJJEE/Dm9fcNi1IJmoQXkb0CpRI1Cf+WQOGETcK/J1AocZPwIoLazLhvxc6zOI7vCMOQ1eoREVF1nvVKKTmUW+vg1lwN7Ft3OQWucal1QJLMJ2EYbic7gPF4dJQJqyp8UYG9EgCfT77Whs9yVIEHCg2hneFkXFg9/flVS+DkyzcA+fv0O5uXCsMDKBHhI0eHDx6tQCvQCrQCrUAr0Aq0Aq1AK9BcWP9Cc8weeFUlvrm+AjjG25DcXF9Vrop3ysKbVeLsrtWJLEfVqrhTBT57AT9W5KsdYRiSJPNJkY8snarwRvWgVmgd3K5Wj4RhSBzfle4Jpyb8MT5BHaw7FekJp2H42hKOBfC1JBxL4CtLOBbBV5JwLIMvLeEslwuAIWAL/LsS4/GI5XIxBHDytVFL4A9KbNcfG27luh7kthqUWVTV3ewxGJyXWkRm4breA9B3eNnckTVku1V+YMk+CbMnlsvFMDdiUvMp1Ld86Z+/oSnAvwEAxzePFJ2cR3MAAAAASUVORK5CYII=";
var hitmarker_ogg = "data:audio/ogg;base64,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";

function mark(x, y) {
    hitTimes[hiterator++%3] = Date.now();
    var hitTimeDiffs = Math.abs(hitTimes[0] - hitTimes[1]) + Math.abs(hitTimes[1] - hitTimes[2]);
    if (hitTimeDiffs < 1000) {
        tripleAudio = new Audio();
        tripleAudio.src = triple_ogg;
        document.body.appendChild(tripleAudio);
        tripleAudio.play();
    }
    
    img = new Image();
    img.src = hitmarker_png;
    img.style.position = "fixed";
    img.style.left = (x - 24) + "px";
    img.style.top = (y - 24) + "px";
    img.style.webkitPointerEvents = "none";
    img.style.mozPointerEvents = "none";
    img.style.webkitUserSelect = "none";
    img.style.mozUserSelect = "none";
    img.style.zIndex = "1000";
    document.documentElement.appendChild(img);
    
    audio = new Audio();
    audio.src = hitmarker_ogg;
    document.body.appendChild(audio);
    audio.play();
    
    window.setTimeout(function() {
        document.documentElement.removeChild(img);
        document.body.removeChild(audio);
    }, 50);
}

document.addEventListener("click", function(evt) {
    evt = (evt || event);
    mark(evt.clientX, evt.clientY);
});
